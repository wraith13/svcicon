@REM
@REM increment version
@REM

@SETLOCAL

@REM VERSION.cmd のパス
@SET VERSION_CMD=%~dp0..\..\..\VERSION.cmd

@REM 現在のバージョンの読み込み
@CALL "%VERSION_CMD%"

@REM バージョンのインクリメント
@SET /A VERSION_BUILD=1%VERSION_BUILD%+1
@SET VERSION_BUILD=%VERSION_BUILD:~-3,3%
@IF "%VERSION_BUILD%" NEQ "000" GOTO INCREMENT_END
@SET /A VERSION_MINOR=1%VERSION_MINOR%+1
@SET VERSION_MINOR=%VERSION_MINOR:~-2,2%
@IF "%VERSION_MINOR%" NEQ "00" GOTO INCREMENT_END
@SET /A VERSION_MAJOR=%VERSION_MAJOR%+1
:INCREMENT_END

@REM インクリメントしたバージョンの書き込み
@(ECHO @REM このファイルはビルド完了後に solomon\build\subcmd\increment.version.cmd が自動的にインクリメントを行います。)>"%VERSION_CMD%"
@(ECHO @SET VERSION_MAJOR=%VERSION_MAJOR%)>>"%VERSION_CMD%"
@(ECHO @SET VERSION_MINOR=%VERSION_MINOR%)>>"%VERSION_CMD%"
@(ECHO @SET VERSION_BUILD=%VERSION_BUILD%)>>"%VERSION_CMD%"

@ENDLOCAL
